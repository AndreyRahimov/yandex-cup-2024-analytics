# A. Поиск в темноте

В Древнем Египте бог солнца Ра ежедневно совершает путешествие по небу в своей священной ладье. Каждое утро бог Ра начинает плыть по небу на сверкающей ладье, а вечером спускается в подземное царство. Жители Египта верят, что всю ночь он сражается с коварным богом Апопом, побеждает его и утром вновь выплывает на небо.

Бог Апоп страшный и опасный, он охотится на ладью, чтобы бог Ра не мог освещать земли и в мире воцарила темнота. Однажды бог Апоп напал на бога Ра, захватил священную ладью и спрятал в одной из своих двух пещер. Бог Ра ищет свою ладью, но небо затянуто тучами и в темноте не видно, где находится ладья. Вероятность того, что ладья находится в первой пещере равна 0.65, а вероятность найти в темноте свою ладью равна 0.44. Бог солнца уже 3 раза искал в первой пещере и 7 раз во второй пещере, но поиски оказались безуспешными.

1. Найдите вероятность того, что ладья находится в первой пещере, зная о неудачных попытках Бога найти её
    
2. Минимум на сколько попыток должно отличаться количество неудачных попыток в первой пещере от количества неудачных попыток во второй пещере, чтобы вероятность из пункта 1 была меньше 0.5.
    

## Примечания

Ответ на пункт 1 округлите до сотых. В качестве разделителя для дробного числа используйте точку (“.”).

В качестве разделителя для двух ответов используйте пробел.

# B. Купец и монета

В древнем городе Аль-Джабр, славящемся своими мудрецами и торговцами, жил купец по имени Зарифус, хранитель таинственного артефакта — Ока Познания.

Зарифус предлагал путникам сыграть в священную игру судьбы за право обладания Оком Познания. Правила игры были таковы:

1. Купец доставал из своего волшебного мешочка священную монету с изображением двуликого бога Януса. Монета всегда была уравновешена и с равной вероятностью могла упасть на любую из двух сторон.
    
2. Искатель истины должен был подбрасывать монету, стремясь выбить два лика Януса (орла) подряд.
    
3. Если выпадала обратная сторона монеты (решка), число требуемых ликов Януса увеличивалось на один.
    
4. Игра продолжалась до тех пор, пока искатель не выбивал необходимое количество ликов Януса подряд.
    
5. Однако у Зарифуса было условие — всего путник мог сделать только 10 бросков.
    
6. Если искателю удавалось завершить испытание, Зарифус отдавал Око Познания. Если же нет, то путник отправлялся на священную гору близь Аль-Джабра и дальше пытать своё счастье бросками монет.
    

Мудрецы города долго размышляли над этой игрой, пытаясь понять, стоит ли рисковать в поисках священного знания. Они стремились вычислить математическое ожидание победы в этой игре, используя древние формулы вероятностей и ожиданий, но всё никак не могли сойтись во мнении. Они попросили вас помочь им с этими расчётами взамен на 7 местных монет.

Ваша задача — рассчитать математическое ожидание выигрыша в данной игре.

## Формат вывода

Число в интервале [0,1], округленное до 4 знаков, с разделителем "." Примеры: 0.0000 0.1234 0.9876 1.0000

# C. Неизвестные цивилизации

В руки учёных попали очень ценные данные — имена самых значимых представителей нескольких древних цивилизаций, существовавших в разных частях вселенной в разные эпохи, и связи между этими представителями. Помогите учёным ответить на вопрос — данными о скольких цивилизациях они располагают? Учёным априори известно, что любой представитель цивилизации связан с другим представителем этой же цивилизации через несколько «рукопожатий».

## Формат ввода

Список всех известных представителей и список пар $person_x​−person_y$​, где каждая такая пара соответствует наличию связи между представителями $person_x$​ и $person_y$​.

Файл с представителями: [https://disk.yandex.ru/d/158OqX0D3INRRQ](https://disk.yandex.ru/d/158OqX0D3INRRQ)

Файл со связями: [https://disk.yandex.ru/d/cOY20shKVfsCAQ](https://disk.yandex.ru/d/cOY20shKVfsCAQ)

## Формат вывода

Натуральное число.

# D. Игра в кости

Жители древней цивилизации Норте-Чико обожали 2 вещи: строить пирамиды и бросать кости. Любимой игрой правителя была 1000. Он очень не любил в неё проигрывать, поэтому решил собрать своих умнейших подданных, чтобы они придумали для него оптимальную стратегию. Побеждает тот, кто по сумме очков всех своих ходов набирает 1000 очков или больше.

Ваша задача — определить минимальное количество очков за 1 ход, после которых нужно остановиться, чтобы с наибольшей вероятностью победить, когда у вас находятся все 5 кубиков.

Процесс игры: участник бросает 5 кубиков, после чего записывает в очки этого раунда выпавшую комбинацию, при этом убирает кубики, которые её составляют. После чего он может бросить оставшиеся кубики повторно. Если в результате хода у него не осталось кубиков после успешной комбинации, ему возвращаются все 5 кубиков, и он может продолжить броски. Если в результате броска кубики не составили какой-либо комбинации, все накопленные за этот ход очки сгорают и ход переходит к следующему игроку.

Комбинацией считаются одновременно выпавшие 3 – 5 (n) костей одинакового номинала (v), оцениваемые таблицей ниже:

|v↓ n→|3|4|5|
|---|---|---|---|
|1|100|300|1200|
|2|20|60|240|
|3|30|90|360|
|4|40|120|480|
|5|50|150|600|
|6|60|180|720|

Если не выпала ни одна из комбинаций выше, то комбинацией считаются все выпавшие числа 1 и 5, при этом каждая 1 оценивается как 10, а каждая 5 как 5.

## Примечания

- Первым всегда ходит правитель.
- В игре 2 участника.
- Можно перестать бросать и записать накопленные очки в любой момент.
- Про решения при меньшем количестве кубиков в руке мы не спрашиваем.
- Пример бросков за один ход: Бросаем 5 кубиков, 44415 оценивается как 40, убираются три кубика. Бросаем оставшиеся 2 кубика, выпадает 51, записываем ещё +15, убираются 2 кубика, поскольку все кубики сыграли в комбинацию, нам возвращают все 5. Итого у нас 5 кубиков и накоплено 55 очков. Мы снова бросаем, выпадает 23466, комбинации нет, очки за этот ход (55) сгорели, ход переходит оппоненту.
- Если выпадает 11111 — сразу победа.
- В ответе спрашиваем количество очков, набрав которые за ход, нужно остановиться (не каждое число физически возможно в игре получить).

# E. Оцифровка опросов

Во времена Древнего Рима законодательная власть была разделена между магистратами, сенатом и комициями. Процесс законотворчества был таковым: сначала магистрат вносил законопроект в сенат, где проводилось его обсуждение и вносились необходимые правки. Затем прошедший правки законопроект выставлялся на голосование комициям, после чего получал статус закона.

Археологи, исследователи Древнего Рима, в ходе своих поисков отыскали огромный архив, где хранились бюллетени для голосования комиций почти за весь срок его существования! Большая удача с одной стороны, но большой объём тяжелой и кропотливой работы с другой стороны. Чтобы ускорить процесс, исследователи пришли к сотрудникам Яндекса с просьбой оцифровать эти бюллетени. Для этой работы Яндекс сформировал команду аналитиков, частью которой вам выпала честь стать. Вам поручено разработать систему, которая считывает ответы из бюллетеня.

Постановка задачи:

![image](https://contest.yandex.ru/testsys/markdown-image?code=eyJwYXRoIjoic3RhdGVtZW50cy9mb3JfdGFzay5qcGciLCJwcm9ibGVtSWQiOiIxMTQ4NzAxLzIwMjRfMDlfMjcvcDVCQnBaQjE4dyIsInNpZ24iOiI2YzIzZGM2Y2VmNzllMzM1MTcyZTQ0NmJjMDFiODZiMmFmNmE4YTBlZjEzMmNhZjVhOGFkYmI1MGE0YTg5NGEyIn0=)

Имеется картинка, которая представлена в виде массива 0 и 1, полученного при сканировании одного из полей для ответа из бюллетеня. Считаем, что каждое корректное поле представляет собой непрерывный квадратик на белом фоне, в котором участник опроса может поставить крестик.

Считаем, что на картинке не может быть шума. Напишите программу, которая найдёт квадратик в этом массиве, а затем выяснит, был ли он отмечен или нет. Толщина линий квадратика и крестика — 1 пкс. Крестик — это две прямые линии, которые соединяют противоположные углы квадрата.

## Формат ввода

Размер массива (ширина и высота) — целые числа < 10000. Далее вводится массив заданого размера из 0 и 1 без пробелов

## Формат вывода

Возможны следующие исходы:

- `Marked`, если квадратик есть и крестик отмечен
- `Not marked`, если квадратик нашли, но крестика нет или он неполный. Считаем, что крестик есть, если есть непрерывная линия между правым нижним углом и левым верхним углом, а также левым нижним углом и правым верхним.
- `Printing error`, если нет замкнутого квадратика

### Пример 1

| Ввод                                                                                                                                        | Вывод      |
| ------------------------------------------------------------------------------------------------------------------------------------------- | ---------- |
| 11 9<br>11111111000<br>10000011000<br>10100101000<br>10011001000<br>10011001000<br>10100001000<br>11000011000<br>11111111000<br>00000000000 | Not marked |
### Пример 2

| Ввод<br>                                                                                                                                    | Вывод  |
| ------------------------------------------------------------------------------------------------------------------------------------------- | ------ |
| 11 9<br>00000000000<br>00011111111<br>00011000011<br>00010100101<br>00010011001<br>00010011001<br>00010100101<br>00011000011<br>00011111111 | Marked |
### Пример 3

| Ввод                                                                                                                                                                                                  | Вывод          |
| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------- |
| 12 12<br>001111111111<br>001100000011<br>001010000101<br>001001001001<br>001000110001<br>001000110001<br>001001001000<br>001010000101<br>000100000010<br>001111111111<br>000000000000<br>000000000000 | Printing error |
## Примечания

1. Корректный квадрат не может быть вырожденным, поэтому его минимальный размер 5х5.
2. Квадрат всегда расположен параллельно сторонам картинки, проверять равенство сторон также не требуется.

# F. Торговые операции Финикии

Финикийцы были известны своей активной торговлей по всему Средиземноморью. Но удивительно даже не это, а то, что уже в X веке нашей эры финикийские торговцы документировали все свои сделки, ведя учет о совершенных операциях и отчитываясь перед местными властями. Археологи обнаружили многочисленные свидетельства таких записей в разных частях Средиземноморья — в Марокко, Ливане, Испании, на Сицилии и в других местах. Мы собрали все доступные данные об этих операциях и преобразовали их в таблицу для дальнейшего анализа.

Таблица transactions (торговые операции):

- logid — идентификатор события
- date — время события
- countertype — тип события, может быть "sell" (продажа) или "buy" (покупка)
- citizenid — идентификатор гражданина, который совершил операцию
- marketid — идентификатор рынка, на котором была совершена операция
- merchantid — идентификатор торговца, с которым велась операция
- cost — деньги, затраченные на операцию
- model_cost — прогнозная оценка стоимости операции
- fraudbits — фродовая операция или нет (0 — нет, 1 — да))

Таблица merchants (купцы):

- merchantid — идентификатор торговца, с которым велась операция
- guild — гильдия торговца
- coef — коэффициент амнистии торговца

1. Определите гильдию торговцев с наибольшей эффективностью за этот день. Эффективность определяется как произведение:

      Соотношения событий продаж к покупкам $sell / buy$

      Средней амнистии на операцию. Амнистия считается как $\frac{|cost - model\_cost|}{coef}$.

2. Эффективность этой гильдии.
    
3. Определите час, в который представители этой гильдии совершили наибольшее количество продаж.
    

Учитываются только данные, которые не отмечены как фродовые (fraudbits = 0).

Ссылка на данные: [https://disk.yandex.ru/d/ohNlhllt5NEhFg](https://disk.yandex.ru/d/ohNlhllt5NEhFg)

## Формат вывода

Эффективность округлите с точностью до сотых, пример ответа:

Гильдия Пекарей 12.34 15